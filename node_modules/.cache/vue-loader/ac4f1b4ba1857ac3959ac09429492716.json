{"remainingRequest":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lqd/WebstormProjects/warm/src/views/my/setting/UpdateSer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lqd/WebstormProjects/warm/src/views/my/setting/UpdateSer.vue","mtime":1618666436327},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlVwZGF0ZVNlciIsCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICBpc1Nob3dQb3B1cDogZmFsc2UsCiAgICAgIG9sZFBhc3N3b3JkOicnLAogICAgICBuZXdQYXNzd29yZDonJywKICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgb25DbGlja0xlZnQoKXsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9hY2NvdW50JykKICAgIH0sCiAgICBzaG93UG9wdXAoZGF0YSl7CiAgICAgIGlmIChkYXRhPT09J3Bhc3N3b3JkJyl7CiAgICAgICAgdGhpcy5pc1Nob3dQb3B1cCA9IHRydWUKICAgICAgfQogICAgfSwKICAgIHN1Ym1pdCgpewogICAgICBjb25zdCBkYXRhMSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICBuZXdfcGFzc3dvcmQ6dGhpcy5uZXdQYXNzd29yZCwKICAgICAgICBwYXNzd29yZDp0aGlzLm9sZFBhc3N3b3JkLAogICAgICB9KQogICAgICBheGlvcyh7CiAgICAgICAgdXJsOicvYXBpL2F1dGgvcHdkJywKICAgICAgICBtZXRob2Q6ICdwdXQnLAogICAgICAgIGhlYWRlcnM6ewogICAgICAgICAgQXV0aG9yaXphdGlvbjonQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbXlUb2tlbicpCiAgICAgICAgfSwKICAgICAgICBkYXRhOmRhdGExCiAgICAgIH0pLnRoZW4oKHJlcyk9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGU9PT0wKXsKICAgICAgICAgIHRoaXMuJHRvYXN0KHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOifkv67mlLnlr4bnoIHmiJDlip8nCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5pc1Nob3dQb3B1cCA9IGZhbHNlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHRvYXN0KHsKICAgICAgICAgICAgdHlwZTogJ2ZhaWwnLAogICAgICAgICAgICBtZXNzYWdlOifkv67mlLnlpLHotKUs6K+36YeN5paw6L6T5YWlJwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpCiAgICAgIH0pCiAgICAgIHRoaXMubmV3UGFzc3dvcmQgPSAnJwogICAgICB0aGlzLm9sZFBhc3N3b3JkID0gJycKICAgICAgfQogIH0KfQo="},{"version":3,"sources":["UpdateSer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UpdateSer.vue","sourceRoot":"src/views/my/setting","sourcesContent":["<template>\n  <div>\n    <van-nav-bar\n        title=\"用户信息\"\n        left-text=\"返回\"\n        left-arrow\n        @click-left=\"onClickLeft\"\n    />\n    <div>\n      <van-cell is-link class=\"cell-title\" @click=\"showPopup('password')\">\n        <template #title>\n          <i class=\"bi bi-pencil-fill cell-title\"></i>\n          <span class=\"cell-title\">密码修改</span>\n        </template>\n      </van-cell>\n      <van-cell is-link to=\"/\" class=\"cell-title\">\n        <template #title>\n          <i class=\"bi bi-envelope-fill cell-title\"></i>\n          <span class=\"cell-title\">邮箱绑定</span>\n        </template>\n      </van-cell>\n      <van-cell is-link to=\"/\" class=\"cell-title\">\n        <template #title>\n          <i class=\"bi bi-chat-dots-fill cell-title\"></i>\n          <span class=\"cell-title\">微信绑定</span>\n        </template>\n      </van-cell>\n    </div>\n    <div>\n      <van-popup\n          v-model=\"isShowPopup\"\n          position=\"bottom\"\n          :style=\"{ height: '40%' }\"\n          closeable\n          close-icon=\"close\"\n          close-icon-position=\"top-right\">\n        <form>\n          <div class=\"form-group mt-5 form-p\">\n            <label for=\"password1\">旧密码</label>\n            <input type=\"password\" v-model=\"oldPassword\" class=\"form-control\" id=\"password1\" aria-describedby=\"emailHelp\">\n          </div>\n          <div class=\"form-group form-p\">\n            <label for=\"exampleInputPassword1\">新密码</label>\n            <input type=\"password\" v-model=\"newPassword\" class=\"form-control\" id=\"exampleInputPassword1\">\n          </div>\n          <button type=\"button\" class=\"btn btn-dark btn-block  mt-4 form-p\" @click=\"submit\">提交</button>\n        </form>\n      </van-popup>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"UpdateSer\",\n  data(){\n    return{\n      isShowPopup: false,\n      oldPassword:'',\n      newPassword:'',\n    }\n  },\n  methods:{\n    onClickLeft(){\n      this.$router.push('/account')\n    },\n    showPopup(data){\n      if (data==='password'){\n        this.isShowPopup = true\n      }\n    },\n    submit(){\n      const data1 = JSON.stringify({\n        new_password:this.newPassword,\n        password:this.oldPassword,\n      })\n      axios({\n        url:'/api/auth/pwd',\n        method: 'put',\n        headers:{\n          Authorization:'Bearer ' + localStorage.getItem('myToken')\n        },\n        data:data1\n      }).then((res)=> {\n        if (res.data.code===0){\n          this.$toast({\n            type: 'success',\n            message:'修改密码成功'\n          })\n          this.isShowPopup = false\n        } else {\n          this.$toast({\n            type: 'fail',\n            message:'修改失败,请重新输入'\n          })\n        }\n        console.log(res.data)\n      })\n      this.newPassword = ''\n      this.oldPassword = ''\n      }\n  }\n}\n</script>\n\n<style scoped>\n.cell-title{\n  margin-top: 1rem;\n  font-size:20px;\n}\n.bi{\n  padding-right: 0.8rem;\n}\n\n.form-group,.btn{\n  width: 80%;\n}\n.form-p{\n  margin: 0 auto;\n}\n</style>\n"]}]}