{"remainingRequest":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lqd/WebstormProjects/warm/src/views/talk/TalkList.vue?vue&type=style&index=0&id=175aa13a&scoped=true&lang=css&","dependencies":[{"path":"/Users/lqd/WebstormProjects/warm/src/views/talk/TalkList.vue","mtime":1618731355955},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI3Jvb3R7CiAgZGlzcGxheTogYmxvY2s7CiAgaGVpZ2h0OiAxMDAlOwogIHdpZHRoOiAxMDAlOwogIGJhY2tncm91bmQ6IHVybCgiL2ltYWdlcy9pbWdfMi5wbmciKTsKICAvKmJhY2tncm91bmQtc2l6ZTogOyovCn0KLm1lZGlhewogIGJvcmRlci1ib3R0b206ICNBNDgyRUQgMXB4IHNvbGlkOwp9Ci5tZWRpYS1pbWd7CiAgd2lkdGg6IDRyZW07CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIGJvcmRlcjogIzFmYzM5ZSAxcHggc29saWQ7Cn0KLmZyb21Vc2VyLW5hbWV7CiAgcGFkZGluZy10b3A6IDAuM3JlbTsKICBjb2xvcjogYmxhY2s7Cn0KLm1lc3NhZ2UtY29udGVudHsKICBjb2xvcjogIzFEODRGRjsKICBmb250LXNpemU6IDE3cHg7Cn0KLnJpZ2h0LWJ0biAuYnRuewogIGhlaWdodDogNXJlbTsKICB3aWR0aDogNHJlbTsKfQo="},{"version":3,"sources":["TalkList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TalkList.vue","sourceRoot":"src/views/talk","sourcesContent":["<template>\n  <div id=\"root\">\n    <div class=\"animate__animated animate__fadeInUp\">\n      <div>\n        <h4 class=\"ml-3  text-center\">消息通知</h4>\n        <h5 class=\"mt-3 ml-2 pb-0\" style=\"border-bottom: #E5E5E5 1px solid\">全部聊天</h5>\n      </div>\n      <div v-if=\"this.chatList.length!==0\">\n        <div v-for=\"(n,index) in this.chatList\" :key=\"index\">\n          <van-swipe-cell>\n            <div class=\"media\" :style=\"n.hasBg ? 'background-color: #B1E4D5':''\" @click=\"talkTo(n.FromId)\">\n              <img src=\"/images/treeIcon.jpeg\" class=\"mr-3 media-img\" alt=\"...\">\n              <div class=\"media-body\">\n                <div class=\"d-flex justify-content-between\">\n                  <h6 class=\"mt-1 fromUser-name text-danger\">匿名用户</h6>\n                  <small class=\"text-success\">{{ n.CreatedAt }}</small>\n                </div>\n                <p class=\" message-content\">{{ n.LastMsg }}</p>\n              </div>\n            </div>\n            <template #right>\n              <div class=\"btn-group right-btn\">\n                <button class=\"btn btn-secondary\" @click=\"setTop(index)\">{{ n.HasBg ? '取消置顶':'置顶' }}</button>\n                <button class=\"btn btn-danger\" @click=\"doDelete(index)\">删除</button>\n              </div>\n            </template>\n          </van-swipe-cell>\n        </div>\n      </div>\n      <div v-if=\"this.chatList===0\">\n        <van-empty description=\"聊天列表为空\">\n          <van-button round type=\"danger\" class=\"bottom-button\" @click=\"toViewTalk\">找人聊天</van-button>\n        </van-empty>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {createNamespacedHelpers} from 'vuex'\nimport axios from \"axios\";\n\nconst { mapState, mapMutations } = createNamespacedHelpers('warm')\nexport default {\n  name: \"TalkList\",\n  data(){\n    return{\n\n    }\n  },\n  created() {\n    axios({\n      url:'/api/auth/chats',\n      method:'get',\n      headers:{\n        Authorization:'Bearer ' + localStorage.getItem('myToken')\n      },\n    }).then((res)=>{\n      if (res.data.code === 0){\n        this.setChatList(res.data.data.chats)\n        console.log(res.data.data)\n      }\n    })\n  },\n  mounted() {\n    this.changeIsShowFooterMenu(true)\n  },\n  computed:{\n    ...mapState(['chatList'])\n  },\n  methods:{\n    ...mapMutations(['setTalkToWho', 'changeIsShowFooterMenu','setViewContentId',\n      'addChatList','setToTop','deleteChatList','setChatList'\n    ]),\n    talkTo(data){\n      this.setTalkToWho(data)\n      this.changeIsShowFooterMenu(false)\n      console.log(data)\n      this.$router.push('/talkWin')\n    },\n    toViewTalk(){\n     const count=Math.ceil(Math.random()*3)\n      if (count!==0){\n        this.setViewContentId(count)\n      } else {\n        this.setViewContentId(1)\n      }\n      this.$router.push('/view')\n    },\n    setTop(data){\n      this.setToTop(data)\n    },\n    doDelete(data){\n      this.deleteChatList(data)\n    },\n    add(){\n      const count=Math.ceil(Math.random()*6)\n      this.addChatList({fromUserId:count,content:'晚上好',sendTime:'2021-4-13时间 20:00:01'})\n    }\n  }\n\n}\n</script>\n\n<style scoped>\n#root{\n  display: block;\n  height: 100%;\n  width: 100%;\n  background: url(\"/images/img_2.png\");\n  /*background-size: ;*/\n}\n.media{\n  border-bottom: #A482ED 1px solid;\n}\n.media-img{\n  width: 4rem;\n  border-radius: 50%;\n  border: #1fc39e 1px solid;\n}\n.fromUser-name{\n  padding-top: 0.3rem;\n  color: black;\n}\n.message-content{\n  color: #1D84FF;\n  font-size: 17px;\n}\n.right-btn .btn{\n  height: 5rem;\n  width: 4rem;\n}\n</style>\n"]}]}