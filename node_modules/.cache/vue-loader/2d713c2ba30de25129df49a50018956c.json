{"remainingRequest":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lqd/WebstormProjects/warm/src/views/my/setting/UpdateInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lqd/WebstormProjects/warm/src/views/my/setting/UpdateInfo.vue","mtime":1618730519638},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Y3JlYXRlTmFtZXNwYWNlZEhlbHBlcnN9IGZyb20gJ3Z1ZXgnCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmNvbnN0IHsgbWFwU3RhdGUsbWFwTXV0YXRpb25zIH0gPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygnd2FybScpCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXBkYXRlSW5mbyIsCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICBpc1Nob3dJY29uUGlja2VyOmZhbHNlLAogICAgICByYWRpbzogJycsCgogICAgICBhbkdlbmRlcjpudWxsLAogICAgICBjaGFuZ2VkVXNlckluZm86IG51bGwsCiAgICAgIGVuc3VyZVBhc3N3b3JkOiAnJywKICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICBpc1Nob3dQaWNrZXI6IGZhbHNlLAogICAgICBjdXJyZW50RGF0ZTogbnVsbCwKICAgICAgaWNvbjonJywKICAgICAgbmFtZTE6JycsCiAgICAgIGdlbmRlcjonJywKICAgICAgZGVzY3JpcHRpb246JycsCiAgICAgIGJpcnRoOicnLAogICAgICBtaW5EYXRlOiBuZXcgRGF0ZSgxOTYwLCAwLCAxKSwKICAgICAgbWF4RGF0ZTogbmV3IERhdGUoMjAyNSwgMTAsIDEpLAogICAgfQogIH0sCiAgY29tcHV0ZWQ6ewogICAgLi4ubWFwU3RhdGUoWyd1c2VyJ10pCiAgfSwKICBjcmVhdGVkKCkgewogICAgY29uc3QgbmV3RGF0ZSA9IG5ldyBEYXRlKCkKICAgIHRoaXMuY3VycmVudERhdGUgPSBuZXcgRGF0ZShuZXdEYXRlLmdldEZ1bGxZZWFyKCksbmV3RGF0ZS5nZXRNb250aCgpLG5ld0RhdGUuZ2V0RGF0ZSgpKQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGNvbnNvbGUubG9nKHRoaXMudXNlcikKICAgIGNvbnNvbGUubG9nKHRoaXMudXNlci5uYW1lKQogICAgdGhpcy5pY29uID0gdGhpcy51c2VyLmljb24KICAgIHRoaXMubmFtZTEgPSB0aGlzLnVzZXIubmFtZQogICAgdGhpcy5iaXJ0aCA9IHRoaXMudXNlci5pY29uCiAgICB0aGlzLmRlc2NyaXB0aW9uID0gdGhpcy51c2VyLmRlc2NyaXB0aW9uCiAgICB0aGlzLmdlbmRlciA9IHRoaXMudXNlci5nZW5kZXIKICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZTEpCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBNdXRhdGlvbnMoW10pLAogICAgY2hhbmdlR2VuZGVyKGRhdGEpewogICAgICB0aGlzLmdlbmRlciA9IGRhdGEKICAgICAgaWYgKGRhdGE9PT0n55S3Jyl7CiAgICAgICAgdGhpcy4kcmVmcy5tYW4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2JsYWNrJwogICAgICAgIHRoaXMuJHJlZnMubWFuLnN0eWxlLmNvbG9yID0gJ3doaXRlJwogICAgICAgIHRoaXMuJHJlZnMud29tZW4uc3R5bGUuY29sb3IgPSAnYmxhY2snCiAgICAgICAgdGhpcy4kcmVmcy53b21lbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnd2hpdGUnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcmVmcy5tYW4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3doaXRlJwogICAgICAgIHRoaXMuJHJlZnMubWFuLnN0eWxlLmNvbG9yID0gJ2JsYWNrJwogICAgICAgIHRoaXMuJHJlZnMud29tZW4uc3R5bGUuY29sb3IgPSAnd2hpdGUnCiAgICAgICAgdGhpcy4kcmVmcy53b21lbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnYmxhY2snCiAgICAgIH0KICAgIH0sCiAgICBvbkNsaWNrTGVmdDEoKXsKICAgICAgY29uc29sZS5sb2coJ+aPkOS6pCcpCiAgICAgIGNvbnN0IGRhdGExID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgIG5hbWU6dGhpcy5uYW1lMSwKICAgICAgICBiaXJ0aDp0aGlzLmJpcnRoLAogICAgICAgIGdlbmRlcjp0aGlzLmdlbmRlciwKICAgICAgICBkZXNjcmlwdGlvbjp0aGlzLmRlc2NyaXB0aW9uLAogICAgICAgIGljb246dGhpcy5pY29uCiAgICAgIH0pCiAgICAgIGF4aW9zKHsKICAgICAgICB1cmw6Jy9hcGkvYXV0aC9tZScsCiAgICAgICAgbWV0aG9kOidwdXQnLAogICAgICAgIGhlYWRlcnM6ewogICAgICAgICAgQXV0aG9yaXphdGlvbjonQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbXlUb2tlbicpCiAgICAgICAgfSwKICAgICAgICBkYXRhOmRhdGExCiAgICAgIH0pLnRoZW4oKCk9PnsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2FjY291bnQnKQogICAgICB9KQogICAgICAvLyAgICAgLnRoZW4oKHJlcyk9PnsKICAgICAgLy8gICAvLyBpZiAocmVzLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAvLyAgIC8vICAgdGhpcy4kdG9hc3QoewogICAgICAvLyAgIC8vICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgIC8vICAgLy8gICAgIG1lc3NhZ2U6J+S/ruaUueaIkOWKnycKICAgICAgLy8gICAvLyAgIH0pCiAgICAgIC8vICAgLy8gICB0aGlzLiRyb3V0ZXIucHVzaCgnL2FjY291bnQnKQogICAgICAvLyAgIC8vIH0gZWxzZSB7CiAgICAgIC8vICAgLy8gICB0aGlzLiR0b2FzdCh7CiAgICAgIC8vICAgLy8gICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgLy8gICAvLyAgICAgbWVzc2FnZTon5L+u5pS55aSx6LSlLOivt+ajgOafpScKICAgICAgLy8gICAvLyAgIH0pCiAgICAgIC8vICAgfQogICAgICAvLyB9KQogICAgfSwKICAgIGNvbmZpcm1UaW1lKCl7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSkKICAgICAgY29uc29sZS5sb2codGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpKQogICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnREYXRlLmdldERhdGUoKSkKICAgICAgY29uc3QgYmlydGhEYXRlID0nJysgdGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpKyctJyt0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKCkrJy0nK3RoaXMuY3VycmVudERhdGUuZ2V0RGF0ZSgpCiAgICAgIHRoaXMuYmlydGggPSBiaXJ0aERhdGUKICAgICAgdGhpcy5pc1Nob3dQaWNrZXI9ZmFsc2UKICAgIH0sCiAgICBvbkNsaWNrUmlnaHQoKXsKICAgICAgdGhpcy5pY29uID0gdGhpcy5yYWRpbysnLnBuZycKICAgICAgdGhpcy5pc1Nob3dJY29uUGlja2VyID0gZmFsc2UKICAgICAgY29uc29sZS5sb2codGhpcy5yYWRpbykKICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["UpdateInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UpdateInfo.vue","sourceRoot":"src/views/my/setting","sourcesContent":["<template>\n  <div>\n    <div v-if=\"!isShowIconPicker\">\n      <van-nav-bar\n          title=\"修改资料\"\n          left-text=\"返回\"\n          left-arrow\n          @click-left=\"onClickLeft1\"\n      />\n      <div style=\"text-align:center \">\n        <van-image\n            class=\"user-icon\"\n            round\n            width=\"10rem\"\n            height=\"10rem\"\n            fit=\"cover\"\n            :src=\"'/images/'+icon\"\n            @click=\"isShowIconPicker = true\"\n        />\n      </div>\n      <div class=\"card area-Info\">\n        <p>\n          <span class=\"info-label\">昵称</span><input class=\"form-control\" v-model=\"name1\" placeholder=\"请输入昵称\"/>\n        </p>\n        <p>\n          <span class=\"gender\">性别</span>\n          <button  type=\"button\" class=\"btn sex-btn mr-2\" ref=\"man\" @click=\"changeGender('男')\">男</button>\n          <button  class=\"btn sex-btn\" ref=\"women\" type=\"button\" @click=\"changeGender('女')\">女</button>\n        </p>\n        <p>\n          <span class=\"info-label\">生日</span>\n          <input type=\"text\" class=\"form-control\" v-model=\"birth\" placeholder=\"选择生日\" @focus=\"isShowPicker=true\"/>\n          <van-popup\n              v-model=\"isShowPicker\"\n              position=\"bottom\"\n              :style=\"{ height: '40%' }\">\n            <van-datetime-picker\n                v-model=\"currentDate\"\n                type=\"date\"\n                title=\"选择年月日\"\n                :min-date=\"minDate\"\n                :max-date=\"maxDate\"\n                @confirm=\"confirmTime\"\n                @cancel=\"isShowPicker=false\"\n            />\n          </van-popup>\n        </p>\n        <div class=\"input-group\">\n          <span class=\"info-label\" style=\"height: 1.3rem;margin-top: 0.5rem;padding-top: 0\">签名</span>\n          <input type=\"text\" v-model=\"description\" class=\"form-control info-sign\" placeholder=\"请输入签名\" aria-describedby=\"basic-addon2\">\n          <div class=\"input-group-append\">\n            <span class=\"input-group-text\" id=\"basic-addon2\">{{ description.length }}/15</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"isShowIconPicker\">\n      <van-nav-bar\n          title=\"头像选择\"\n          left-text=\"返回\"\n          right-text=\"确认\"\n          left-arrow\n          @click-left=\"this.isShowIconPicker = false\"\n          @click-right=\"onClickRight\"\n      />\n      <div class=\"d-flex row justify-content-start icon-group\">\n        <van-radio-group v-model=\"radio\" v-for=\"n in 7\" :key=\"n\">\n          <van-radio :name=\"n\">\n            <img :src=\"'/images/'+n+'.png'\" class=\"icon\" alt=\"...\">\n          </van-radio>\n        </van-radio-group>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {createNamespacedHelpers} from 'vuex'\nimport axios from \"axios\";\nconst { mapState,mapMutations } = createNamespacedHelpers('warm')\nexport default {\n  name: \"UpdateInfo\",\n  data(){\n    return{\n      isShowIconPicker:false,\n      radio: '',\n\n      anGender:null,\n      changedUserInfo: null,\n      ensurePassword: '',\n      fileList: [],\n      isShowPicker: false,\n      currentDate: null,\n      icon:'',\n      name1:'',\n      gender:'',\n      description:'',\n      birth:'',\n      minDate: new Date(1960, 0, 1),\n      maxDate: new Date(2025, 10, 1),\n    }\n  },\n  computed:{\n    ...mapState(['user'])\n  },\n  created() {\n    const newDate = new Date()\n    this.currentDate = new Date(newDate.getFullYear(),newDate.getMonth(),newDate.getDate())\n  },\n  mounted() {\n    console.log(this.user)\n    console.log(this.user.name)\n    this.icon = this.user.icon\n    this.name1 = this.user.name\n    this.birth = this.user.icon\n    this.description = this.user.description\n    this.gender = this.user.gender\n    console.log(this.name1)\n  },\n  methods: {\n    ...mapMutations([]),\n    changeGender(data){\n      this.gender = data\n      if (data==='男'){\n        this.$refs.man.style.backgroundColor = 'black'\n        this.$refs.man.style.color = 'white'\n        this.$refs.women.style.color = 'black'\n        this.$refs.women.style.backgroundColor = 'white'\n      } else {\n        this.$refs.man.style.backgroundColor = 'white'\n        this.$refs.man.style.color = 'black'\n        this.$refs.women.style.color = 'white'\n        this.$refs.women.style.backgroundColor = 'black'\n      }\n    },\n    onClickLeft1(){\n      console.log('提交')\n      const data1 = JSON.stringify({\n        name:this.name1,\n        birth:this.birth,\n        gender:this.gender,\n        description:this.description,\n        icon:this.icon\n      })\n      axios({\n        url:'/api/auth/me',\n        method:'put',\n        headers:{\n          Authorization:'Bearer ' + localStorage.getItem('myToken')\n        },\n        data:data1\n      }).then(()=>{\n        this.$router.push('/account')\n      })\n      //     .then((res)=>{\n      //   // if (res.data.code === 0) {\n      //   //   this.$toast({\n      //   //     type: 'success',\n      //   //     message:'修改成功'\n      //   //   })\n      //   //   this.$router.push('/account')\n      //   // } else {\n      //   //   this.$toast({\n      //   //     type: 'success',\n      //   //     message:'修改失败,请检查'\n      //   //   })\n      //   }\n      // })\n    },\n    confirmTime(){\n      console.log(this.currentDate.getFullYear())\n      console.log(this.currentDate.getMonth())\n      console.log(this.currentDate.getDate())\n      const birthDate =''+ this.currentDate.getFullYear()+'-'+this.currentDate.getMonth()+'-'+this.currentDate.getDate()\n      this.birth = birthDate\n      this.isShowPicker=false\n    },\n    onClickRight(){\n      this.icon = this.radio+'.png'\n      this.isShowIconPicker = false\n      console.log(this.radio)\n    }\n  },\n}\n</script>\n\n<style scoped>\n.user-icon{\n  margin-top: 3rem;\n  box-shadow: 0 0 10px #888888;\n}\n.area-Info{\n  width: 80%;\n  margin: 2rem auto;\n  padding-top: 1.3rem;\n  border-radius: 2rem;\n  box-shadow: 0 0 10px #888888;\n}\n.icon-group{\n  margin-left: 1rem;\n}\n.icon{\n  width: 6rem;\n}\n.gender{\n  color: black;\n  padding-left: 2rem;\n  padding-right: 2.4rem;\n}\n.sex-btn{\n  font-size: 14px;\n  border-radius: 1rem;\n  width: 3.6rem;\n  border: black 1px solid;\n}\n.submit-btn{\n  height: 3rem;\n  border-radius: 1.5rem;\n  margin:0 auto;\n}\n.form-control{\n  display: inline-block;\n  width: 60%;\n  border: 0!important;\n}\n.input-group{\n  margin-bottom: 0;\n  padding-bottom: 1rem;\n  width: 96%;\n}\n.form-control:focus{\n  box-shadow: none!important;\n}\n.input-group-text{\n  background: white;\n  border: 0;\n}\n.info-label{\n  border-right: #888888 1px solid;\n  padding-right: 2rem;\n  padding-left: 2rem;\n}\n</style>\n\n"]}]}