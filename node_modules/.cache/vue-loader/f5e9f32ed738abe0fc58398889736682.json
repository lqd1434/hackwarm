{"remainingRequest":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lqd/WebstormProjects/warm/src/views/my/setting/AuditPost.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lqd/WebstormProjects/warm/src/views/my/setting/AuditPost.vue","mtime":1618721510636},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkF1ZGl0UG9zdCIsCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICBwb3N0czpbXQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0QWxsUG9zdCgpLnRoZW4oKHJlcyk9PnsKICAgICAgdGhpcy5wb3N0cyA9IHJlcy5kYXRhLnBvc3RzCiAgICB9KQogIH0sCiAgbWV0aG9kczp7CiAgICBvbkNsaWNrTGVmdCgpewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL21pbmUnKQogICAgfSwKICAgIGdldEFsbFBvc3QoKXsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgocmVzb2x2ZSkgPT4gewogICAgICAgIGF4aW9zKHsKICAgICAgICAgIHVybDonL2FwaS9hZG1pbi9wb3N0cycsCiAgICAgICAgICBtZXRob2Q6J2dldCcsCiAgICAgICAgICBoZWFkZXJzOnsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjonQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbXlUb2tlbicpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbigocmVzKT0+ewogICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDApewogICAgICAgICAgICByZXNvbHZlKHJlcy5kYXRhKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kdG9hc3QoewogICAgICAgICAgICAgIHR5cGU6ICdmYWlsJywKICAgICAgICAgICAgICBtZXNzYWdlOifojrflj5blrqHmoLjliJfooajlpLHotKUnCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSkpCiAgICB9LAogICAgYXVkaXQoc3RhdHVzLGlkKXsKICAgICAgYXhpb3MoewogICAgICAgIHVybDonL2FwaS9hZG1pbi9wb3N0LycraWQrJy8nK3N0YXR1cywKICAgICAgICBtZXRob2Q6J3B1dCcsCiAgICAgICAgaGVhZGVyczp7CiAgICAgICAgICBBdXRob3JpemF0aW9uOidCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdteVRva2VuJykKICAgICAgICB9CiAgICAgIH0pLnRoZW4oKHJlcyk9PnsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMCl7CiAgICAgICAgICB0aGlzLiR0b2FzdCh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTon5a6h5qC46YCa6L+HJwogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kdG9hc3QoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6cmVzLmRhdGEubXNnCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSkKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["AuditPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AuditPost.vue","sourceRoot":"src/views/my/setting","sourcesContent":["<template>\n  <div>\n    <div>\n      <van-nav-bar\n          title=\"帖子审核\"\n          left-text=\"返回\"\n          left-arrow\n          @click-left=\"onClickLeft\"\n      />\n      <div class=\"list-group animate__animated animate__fadeInDown\" v-for=\"item in posts\" :key=\"item.ID\">\n        <div class=\"list-group-item list-group-item-action\">\n          <div class=\"d-flex w-100 justify-content-between\">\n            <h6 class=\"mb-1\">{{ item.Title }}<span class=\"pl-2 text-primary\">[{{ item.TagId }}]</span></h6>\n            <small class=\"text-danger\">{{ item.ID }}</small>\n          </div>\n          <div class=\"post-content mb-1 w-75\">{{ item.Content }}</div>\n          <small class=\"text-secondary\">{{ item.CreatedAt }}</small>\n          <div class=\"btn-group float-right\">\n            <div class=\"btn btn-primary mr-2\" @click=\"audit(1,item.ID)\">通过</div>\n            <div class=\"btn btn-warning\" @click=\"audit(2,item.ID)\">阻止</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"AuditPost\",\n  data(){\n    return{\n      posts:[]\n    }\n  },\n  mounted() {\n    this.getAllPost().then((res)=>{\n      this.posts = res.data.posts\n    })\n  },\n  methods:{\n    onClickLeft(){\n      this.$router.push('/mine')\n    },\n    getAllPost(){\n      return new Promise(((resolve) => {\n        axios({\n          url:'/api/admin/posts',\n          method:'get',\n          headers:{\n            Authorization:'Bearer ' + localStorage.getItem('myToken')\n          }\n        }).then((res)=>{\n          if (res.data.code === 0){\n            resolve(res.data)\n          } else {\n            this.$toast({\n              type: 'fail',\n              message:'获取审核列表失败'\n            })\n          }\n        })\n      }))\n    },\n    audit(status,id){\n      axios({\n        url:'/api/admin/post/'+id+'/'+status,\n        method:'put',\n        headers:{\n          Authorization:'Bearer ' + localStorage.getItem('myToken')\n        }\n      }).then((res)=>{\n        if (res.data.code === 0){\n          this.$toast({\n            type: 'success',\n            message:'审核通过'\n          })\n        } else {\n          this.$toast({\n            type: 'success',\n            message:res.data.msg\n          })\n        }\n        console.log(res.data)\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.btn{\n  border-radius: 0.3rem;\n}\n</style>\n"]}]}