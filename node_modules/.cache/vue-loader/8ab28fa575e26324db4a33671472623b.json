{"remainingRequest":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lqd/WebstormProjects/warm/src/views/my/setting/UpdateSer.vue?vue&type=style&index=0&id=26c1b0af&scoped=true&lang=css&","dependencies":[{"path":"/Users/lqd/WebstormProjects/warm/src/views/my/setting/UpdateSer.vue","mtime":1618666436327},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNlbGwtdGl0bGV7CiAgbWFyZ2luLXRvcDogMXJlbTsKICBmb250LXNpemU6MjBweDsKfQouYml7CiAgcGFkZGluZy1yaWdodDogMC44cmVtOwp9CgouZm9ybS1ncm91cCwuYnRuewogIHdpZHRoOiA4MCU7Cn0KLmZvcm0tcHsKICBtYXJnaW46IDAgYXV0bzsKfQo="},{"version":3,"sources":["UpdateSer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"UpdateSer.vue","sourceRoot":"src/views/my/setting","sourcesContent":["<template>\n  <div>\n    <van-nav-bar\n        title=\"用户信息\"\n        left-text=\"返回\"\n        left-arrow\n        @click-left=\"onClickLeft\"\n    />\n    <div>\n      <van-cell is-link class=\"cell-title\" @click=\"showPopup('password')\">\n        <template #title>\n          <i class=\"bi bi-pencil-fill cell-title\"></i>\n          <span class=\"cell-title\">密码修改</span>\n        </template>\n      </van-cell>\n      <van-cell is-link to=\"/\" class=\"cell-title\">\n        <template #title>\n          <i class=\"bi bi-envelope-fill cell-title\"></i>\n          <span class=\"cell-title\">邮箱绑定</span>\n        </template>\n      </van-cell>\n      <van-cell is-link to=\"/\" class=\"cell-title\">\n        <template #title>\n          <i class=\"bi bi-chat-dots-fill cell-title\"></i>\n          <span class=\"cell-title\">微信绑定</span>\n        </template>\n      </van-cell>\n    </div>\n    <div>\n      <van-popup\n          v-model=\"isShowPopup\"\n          position=\"bottom\"\n          :style=\"{ height: '40%' }\"\n          closeable\n          close-icon=\"close\"\n          close-icon-position=\"top-right\">\n        <form>\n          <div class=\"form-group mt-5 form-p\">\n            <label for=\"password1\">旧密码</label>\n            <input type=\"password\" v-model=\"oldPassword\" class=\"form-control\" id=\"password1\" aria-describedby=\"emailHelp\">\n          </div>\n          <div class=\"form-group form-p\">\n            <label for=\"exampleInputPassword1\">新密码</label>\n            <input type=\"password\" v-model=\"newPassword\" class=\"form-control\" id=\"exampleInputPassword1\">\n          </div>\n          <button type=\"button\" class=\"btn btn-dark btn-block  mt-4 form-p\" @click=\"submit\">提交</button>\n        </form>\n      </van-popup>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"UpdateSer\",\n  data(){\n    return{\n      isShowPopup: false,\n      oldPassword:'',\n      newPassword:'',\n    }\n  },\n  methods:{\n    onClickLeft(){\n      this.$router.push('/account')\n    },\n    showPopup(data){\n      if (data==='password'){\n        this.isShowPopup = true\n      }\n    },\n    submit(){\n      const data1 = JSON.stringify({\n        new_password:this.newPassword,\n        password:this.oldPassword,\n      })\n      axios({\n        url:'/api/auth/pwd',\n        method: 'put',\n        headers:{\n          Authorization:'Bearer ' + localStorage.getItem('myToken')\n        },\n        data:data1\n      }).then((res)=> {\n        if (res.data.code===0){\n          this.$toast({\n            type: 'success',\n            message:'修改密码成功'\n          })\n          this.isShowPopup = false\n        } else {\n          this.$toast({\n            type: 'fail',\n            message:'修改失败,请重新输入'\n          })\n        }\n        console.log(res.data)\n      })\n      this.newPassword = ''\n      this.oldPassword = ''\n      }\n  }\n}\n</script>\n\n<style scoped>\n.cell-title{\n  margin-top: 1rem;\n  font-size:20px;\n}\n.bi{\n  padding-right: 0.8rem;\n}\n\n.form-group,.btn{\n  width: 80%;\n}\n.form-p{\n  margin: 0 auto;\n}\n</style>\n"]}]}