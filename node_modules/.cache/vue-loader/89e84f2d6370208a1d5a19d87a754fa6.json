{"remainingRequest":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lqd/WebstormProjects/warm/src/views/my/UpdateInfo.vue?vue&type=style&index=0&id=0078dcd0&scoped=true&lang=css&","dependencies":[{"path":"/Users/lqd/WebstormProjects/warm/src/views/my/UpdateInfo.vue","mtime":1618126835335},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi52YW4tY2VsbHsKICBtYXJnaW4tYm90dG9tOiAxMHB4Owp9Cg=="},{"version":3,"sources":["UpdateInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA","file":"UpdateInfo.vue","sourceRoot":"src/views/my","sourcesContent":["<template>\n  <div>\n    <van-nav-bar\n        title=\"修改资料\"\n        left-text=\"返回\"\n        left-arrow\n        @click-left=\"onClickLeft\"\n    />\n    <div style=\"text-align:center \">\n      <p >头像</p>\n      <van-uploader\n          v-model=\"fileList\"\n          image-fit=\"cover\"\n          max-count=\"1\"\n          :before-read=\"beforeRead\"\n      />\n    </div>\n\n    <van-cell-group style=\"margin-top: 30px\">\n      <van-field v-model.trim=\"changedUserInfo.username\" label=\"用户名\" type=\"text\" placeholder=\"请输入用户名\" />\n      <van-field v-model.trim=\"changedUserInfo.password\" label=\"密码\" type=\"password\" placeholder=\"请输入密码\" />\n      <van-field v-model.trim=\"ensurePassword\" @blur=\"ensure\" label=\"确认密码\" type=\"password\" placeholder=\"请输入密码\" />\n      <van-field\n          v-model.trim=\"changedUserInfo.mySign\"\n          rows=\"3\"\n          :autosize=\"true\"\n          label=\"我的个性签名\"\n          type=\"textarea\"\n          maxlength=\"100\"\n          placeholder=\"请输入我的签名\"\n          show-word-limit\n      />\n    </van-cell-group>\n    <van-button type=\"primary\" @click=\"submit\" block>提交</van-button>\n  </div>\n</template>\n\n<script>\nimport { createNamespacedHelpers } from 'vuex'\nconst { mapState } = createNamespacedHelpers('warm')\nexport default {\n  name: \"UpdateInfo\",\n  data(){\n    return{\n      changedUserInfo: {id: 0,username:'',password:'',mySign:''},\n      ensurePassword: '',\n      fileList: []\n    }\n  },\n  mounted() {\n    this.changedUserInfo.id = this.user.id\n    this.changedUserInfo.username = this.user.username\n    this.changedUserInfo.password = this.user.password\n    this.changedUserInfo.mySign = this.user.mySign\n    this.fileList.push({url:'/images/'+this.user.icon})\n  },\n  methods: {\n    beforeRead(file) {\n      if (file.type !== 'image/jpeg') {\n        this.$toast('请上传 jpg 格式图片');\n        return false;\n      }\n      return true;\n    },\n    // 返回 Promise\n    asyncBeforeRead(file) {\n      return new Promise((resolve, reject) => {\n        if (file.type !== 'image/jpeg') {\n          this.$toast('请上传 jpg 格式图片');\n          reject();\n        } else {\n          let img = new File(['foo'], 'bar.jpg', {\n            type: 'image/jpeg',\n          });\n          resolve(img);\n        }\n      });\n    },\n    onClickLeft(){\n      this.$router.go(-1)\n    },\n    ensure(){\n      if (this.ensurePassword!==this.user.password){\n        this.$toast({\n          message: '两次输入的密码不一致',\n          icon: 'cross',\n          type: 'fail',\n        })\n        this.ensurePassword = ''\n      }\n    },\n    submit(){\n      console.log('提交')\n      console.log(this.changedUserInfo)\n    }\n  },\n  computed:{\n    ...mapState(['user'])\n  }\n}\n</script>\n\n<style scoped>\n.van-cell{\n  margin-bottom: 10px;\n}\n</style>\n"]}]}