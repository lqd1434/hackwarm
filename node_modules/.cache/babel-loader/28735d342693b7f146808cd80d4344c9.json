{"remainingRequest":"/Users/lqd/WebstormProjects/warm/node_modules/babel-loader/lib/index.js!/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lqd/WebstormProjects/warm/src/views/my/setting/AuditPost.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lqd/WebstormProjects/warm/src/views/my/setting/AuditPost.vue","mtime":1618721510636},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBdWRpdFBvc3QiLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcG9zdHM6IFtdCiAgICB9OwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldEFsbFBvc3QoKS50aGVuKHJlcyA9PiB7CiAgICAgIHRoaXMucG9zdHMgPSByZXMuZGF0YS5wb3N0czsKICAgIH0pOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIG9uQ2xpY2tMZWZ0KCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL21pbmUnKTsKICAgIH0sCgogICAgZ2V0QWxsUG9zdCgpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgIGF4aW9zKHsKICAgICAgICAgIHVybDogJy9hcGkvYWRtaW4vcG9zdHMnLAogICAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ215VG9rZW4nKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kdG9hc3QoewogICAgICAgICAgICAgIHR5cGU6ICdmYWlsJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn6I635Y+W5a6h5qC45YiX6KGo5aSx6LSlJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAoKICAgIGF1ZGl0KHN0YXR1cywgaWQpIHsKICAgICAgYXhpb3MoewogICAgICAgIHVybDogJy9hcGkvYWRtaW4vcG9zdC8nICsgaWQgKyAnLycgKyBzdGF0dXMsCiAgICAgICAgbWV0aG9kOiAncHV0JywKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbXlUb2tlbicpCiAgICAgICAgfQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgIHRoaXMuJHRvYXN0KHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5a6h5qC46YCa6L+HJwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHRvYXN0KHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiByZXMuZGF0YS5tc2cKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICB9KTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["AuditPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;;AAEA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AADA,KAAA;AAGA,GANA;;AAOA,EAAA,OAAA,GAAA;AACA,SAAA,UAAA,GAAA,IAAA,CAAA,GAAA,IAAA;AACA,WAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AACA,KAFA;AAGA,GAXA;;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,WAAA,GAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA,KAHA;;AAIA,IAAA,UAAA,GAAA;AACA,aAAA,IAAA,OAAA,CAAA,OAAA,IAAA;AACA,QAAA,KAAA,CAAA;AACA,UAAA,GAAA,EAAA,kBADA;AAEA,UAAA,MAAA,EAAA,KAFA;AAGA,UAAA,OAAA,EAAA;AACA,YAAA,aAAA,EAAA,YAAA,YAAA,CAAA,OAAA,CAAA,SAAA;AADA;AAHA,SAAA,CAAA,CAMA,IANA,CAMA,GAAA,IAAA;AACA,cAAA,GAAA,CAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA;AACA,WAFA,MAEA;AACA,iBAAA,MAAA,CAAA;AACA,cAAA,IAAA,EAAA,MADA;AAEA,cAAA,OAAA,EAAA;AAFA,aAAA;AAIA;AACA,SAfA;AAgBA,OAjBA,CAAA;AAkBA,KAvBA;;AAwBA,IAAA,KAAA,CAAA,MAAA,EAAA,EAAA,EAAA;AACA,MAAA,KAAA,CAAA;AACA,QAAA,GAAA,EAAA,qBAAA,EAAA,GAAA,GAAA,GAAA,MADA;AAEA,QAAA,MAAA,EAAA,KAFA;AAGA,QAAA,OAAA,EAAA;AACA,UAAA,aAAA,EAAA,YAAA,YAAA,CAAA,OAAA,CAAA,SAAA;AADA;AAHA,OAAA,CAAA,CAMA,IANA,CAMA,GAAA,IAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,eAAA,MAAA,CAAA;AACA,YAAA,IAAA,EAAA,SADA;AAEA,YAAA,OAAA,EAAA;AAFA,WAAA;AAIA,SALA,MAKA;AACA,eAAA,MAAA,CAAA;AACA,YAAA,IAAA,EAAA,SADA;AAEA,YAAA,OAAA,EAAA,GAAA,CAAA,IAAA,CAAA;AAFA,WAAA;AAIA;;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA;AACA,OAnBA;AAoBA;;AA7CA;AAZA,CAAA","sourcesContent":["<template>\n  <div>\n    <div>\n      <van-nav-bar\n          title=\"帖子审核\"\n          left-text=\"返回\"\n          left-arrow\n          @click-left=\"onClickLeft\"\n      />\n      <div class=\"list-group animate__animated animate__fadeInDown\" v-for=\"item in posts\" :key=\"item.ID\">\n        <div class=\"list-group-item list-group-item-action\">\n          <div class=\"d-flex w-100 justify-content-between\">\n            <h6 class=\"mb-1\">{{ item.Title }}<span class=\"pl-2 text-primary\">[{{ item.TagId }}]</span></h6>\n            <small class=\"text-danger\">{{ item.ID }}</small>\n          </div>\n          <div class=\"post-content mb-1 w-75\">{{ item.Content }}</div>\n          <small class=\"text-secondary\">{{ item.CreatedAt }}</small>\n          <div class=\"btn-group float-right\">\n            <div class=\"btn btn-primary mr-2\" @click=\"audit(1,item.ID)\">通过</div>\n            <div class=\"btn btn-warning\" @click=\"audit(2,item.ID)\">阻止</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"AuditPost\",\n  data(){\n    return{\n      posts:[]\n    }\n  },\n  mounted() {\n    this.getAllPost().then((res)=>{\n      this.posts = res.data.posts\n    })\n  },\n  methods:{\n    onClickLeft(){\n      this.$router.push('/mine')\n    },\n    getAllPost(){\n      return new Promise(((resolve) => {\n        axios({\n          url:'/api/admin/posts',\n          method:'get',\n          headers:{\n            Authorization:'Bearer ' + localStorage.getItem('myToken')\n          }\n        }).then((res)=>{\n          if (res.data.code === 0){\n            resolve(res.data)\n          } else {\n            this.$toast({\n              type: 'fail',\n              message:'获取审核列表失败'\n            })\n          }\n        })\n      }))\n    },\n    audit(status,id){\n      axios({\n        url:'/api/admin/post/'+id+'/'+status,\n        method:'put',\n        headers:{\n          Authorization:'Bearer ' + localStorage.getItem('myToken')\n        }\n      }).then((res)=>{\n        if (res.data.code === 0){\n          this.$toast({\n            type: 'success',\n            message:'审核通过'\n          })\n        } else {\n          this.$toast({\n            type: 'success',\n            message:res.data.msg\n          })\n        }\n        console.log(res.data)\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.btn{\n  border-radius: 0.3rem;\n}\n</style>\n"],"sourceRoot":"src/views/my/setting"}]}