{"remainingRequest":"/Users/lqd/WebstormProjects/warm/node_modules/babel-loader/lib/index.js!/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lqd/WebstormProjects/warm/src/views/talk/TalkList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lqd/WebstormProjects/warm/src/views/talk/TalkList.vue","mtime":1618731355955},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lqd/WebstormProjects/warm/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKY29uc3QgewogIG1hcFN0YXRlLAogIG1hcE11dGF0aW9ucwp9ID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoJ3dhcm0nKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUYWxrTGlzdCIsCgogIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGF4aW9zKHsKICAgICAgdXJsOiAnL2FwaS9hdXRoL2NoYXRzJywKICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdteVRva2VuJykKICAgICAgfQogICAgfSkudGhlbihyZXMgPT4gewogICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgIHRoaXMuc2V0Q2hhdExpc3QocmVzLmRhdGEuZGF0YS5jaGF0cyk7CiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEuZGF0YSk7CiAgICAgIH0KICAgIH0pOwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmNoYW5nZUlzU2hvd0Zvb3Rlck1lbnUodHJ1ZSk7CiAgfSwKCiAgY29tcHV0ZWQ6IHsgLi4ubWFwU3RhdGUoWydjaGF0TGlzdCddKQogIH0sCiAgbWV0aG9kczogeyAuLi5tYXBNdXRhdGlvbnMoWydzZXRUYWxrVG9XaG8nLCAnY2hhbmdlSXNTaG93Rm9vdGVyTWVudScsICdzZXRWaWV3Q29udGVudElkJywgJ2FkZENoYXRMaXN0JywgJ3NldFRvVG9wJywgJ2RlbGV0ZUNoYXRMaXN0JywgJ3NldENoYXRMaXN0J10pLAoKICAgIHRhbGtUbyhkYXRhKSB7CiAgICAgIHRoaXMuc2V0VGFsa1RvV2hvKGRhdGEpOwogICAgICB0aGlzLmNoYW5nZUlzU2hvd0Zvb3Rlck1lbnUoZmFsc2UpOwogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy90YWxrV2luJyk7CiAgICB9LAoKICAgIHRvVmlld1RhbGsoKSB7CiAgICAgIGNvbnN0IGNvdW50ID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAzKTsKCiAgICAgIGlmIChjb3VudCAhPT0gMCkgewogICAgICAgIHRoaXMuc2V0Vmlld0NvbnRlbnRJZChjb3VudCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZXRWaWV3Q29udGVudElkKDEpOwogICAgICB9CgogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3ZpZXcnKTsKICAgIH0sCgogICAgc2V0VG9wKGRhdGEpIHsKICAgICAgdGhpcy5zZXRUb1RvcChkYXRhKTsKICAgIH0sCgogICAgZG9EZWxldGUoZGF0YSkgewogICAgICB0aGlzLmRlbGV0ZUNoYXRMaXN0KGRhdGEpOwogICAgfSwKCiAgICBhZGQoKSB7CiAgICAgIGNvbnN0IGNvdW50ID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiA2KTsKICAgICAgdGhpcy5hZGRDaGF0TGlzdCh7CiAgICAgICAgZnJvbVVzZXJJZDogY291bnQsCiAgICAgICAgY29udGVudDogJ+aZmuS4iuWlvScsCiAgICAgICAgc2VuZFRpbWU6ICcyMDIxLTQtMTPml7bpl7QgMjA6MDA6MDEnCiAgICAgIH0pOwogICAgfQoKICB9Cn07"},{"version":3,"sources":["TalkList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,SAAA,uBAAA,QAAA,MAAA;AACA,OAAA,KAAA,MAAA,OAAA;AAEA,MAAA;AAAA,EAAA,QAAA;AAAA,EAAA;AAAA,IAAA,uBAAA,CAAA,MAAA,CAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;;AAEA,EAAA,IAAA,GAAA;AACA,WAAA,EAAA;AAGA,GANA;;AAOA,EAAA,OAAA,GAAA;AACA,IAAA,KAAA,CAAA;AACA,MAAA,GAAA,EAAA,iBADA;AAEA,MAAA,MAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AACA,QAAA,aAAA,EAAA,YAAA,YAAA,CAAA,OAAA,CAAA,SAAA;AADA;AAHA,KAAA,CAAA,CAMA,IANA,CAMA,GAAA,IAAA;AACA,UAAA,GAAA,CAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,aAAA,WAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,KAXA;AAYA,GApBA;;AAqBA,EAAA,OAAA,GAAA;AACA,SAAA,sBAAA,CAAA,IAAA;AACA,GAvBA;;AAwBA,EAAA,QAAA,EAAA,EACA,GAAA,QAAA,CAAA,CAAA,UAAA,CAAA;AADA,GAxBA;AA2BA,EAAA,OAAA,EAAA,EACA,GAAA,YAAA,CAAA,CAAA,cAAA,EAAA,wBAAA,EAAA,kBAAA,EACA,aADA,EACA,UADA,EACA,gBADA,EACA,aADA,CAAA,CADA;;AAIA,IAAA,MAAA,CAAA,IAAA,EAAA;AACA,WAAA,YAAA,CAAA,IAAA;AACA,WAAA,sBAAA,CAAA,KAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,UAAA;AACA,KATA;;AAUA,IAAA,UAAA,GAAA;AACA,YAAA,KAAA,GAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,CAAA;;AACA,UAAA,KAAA,KAAA,CAAA,EAAA;AACA,aAAA,gBAAA,CAAA,KAAA;AACA,OAFA,MAEA;AACA,aAAA,gBAAA,CAAA,CAAA;AACA;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA,KAlBA;;AAmBA,IAAA,MAAA,CAAA,IAAA,EAAA;AACA,WAAA,QAAA,CAAA,IAAA;AACA,KArBA;;AAsBA,IAAA,QAAA,CAAA,IAAA,EAAA;AACA,WAAA,cAAA,CAAA,IAAA;AACA,KAxBA;;AAyBA,IAAA,GAAA,GAAA;AACA,YAAA,KAAA,GAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,CAAA;AACA,WAAA,WAAA,CAAA;AAAA,QAAA,UAAA,EAAA,KAAA;AAAA,QAAA,OAAA,EAAA,KAAA;AAAA,QAAA,QAAA,EAAA;AAAA,OAAA;AACA;;AA5BA;AA3BA,CAAA","sourcesContent":["<template>\n  <div id=\"root\">\n    <div class=\"animate__animated animate__fadeInUp\">\n      <div>\n        <h4 class=\"ml-3  text-center\">消息通知</h4>\n        <h5 class=\"mt-3 ml-2 pb-0\" style=\"border-bottom: #E5E5E5 1px solid\">全部聊天</h5>\n      </div>\n      <div v-if=\"this.chatList.length!==0\">\n        <div v-for=\"(n,index) in this.chatList\" :key=\"index\">\n          <van-swipe-cell>\n            <div class=\"media\" :style=\"n.hasBg ? 'background-color: #B1E4D5':''\" @click=\"talkTo(n.FromId)\">\n              <img src=\"/images/treeIcon.jpeg\" class=\"mr-3 media-img\" alt=\"...\">\n              <div class=\"media-body\">\n                <div class=\"d-flex justify-content-between\">\n                  <h6 class=\"mt-1 fromUser-name text-danger\">匿名用户</h6>\n                  <small class=\"text-success\">{{ n.CreatedAt }}</small>\n                </div>\n                <p class=\" message-content\">{{ n.LastMsg }}</p>\n              </div>\n            </div>\n            <template #right>\n              <div class=\"btn-group right-btn\">\n                <button class=\"btn btn-secondary\" @click=\"setTop(index)\">{{ n.HasBg ? '取消置顶':'置顶' }}</button>\n                <button class=\"btn btn-danger\" @click=\"doDelete(index)\">删除</button>\n              </div>\n            </template>\n          </van-swipe-cell>\n        </div>\n      </div>\n      <div v-if=\"this.chatList===0\">\n        <van-empty description=\"聊天列表为空\">\n          <van-button round type=\"danger\" class=\"bottom-button\" @click=\"toViewTalk\">找人聊天</van-button>\n        </van-empty>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {createNamespacedHelpers} from 'vuex'\nimport axios from \"axios\";\n\nconst { mapState, mapMutations } = createNamespacedHelpers('warm')\nexport default {\n  name: \"TalkList\",\n  data(){\n    return{\n\n    }\n  },\n  created() {\n    axios({\n      url:'/api/auth/chats',\n      method:'get',\n      headers:{\n        Authorization:'Bearer ' + localStorage.getItem('myToken')\n      },\n    }).then((res)=>{\n      if (res.data.code === 0){\n        this.setChatList(res.data.data.chats)\n        console.log(res.data.data)\n      }\n    })\n  },\n  mounted() {\n    this.changeIsShowFooterMenu(true)\n  },\n  computed:{\n    ...mapState(['chatList'])\n  },\n  methods:{\n    ...mapMutations(['setTalkToWho', 'changeIsShowFooterMenu','setViewContentId',\n      'addChatList','setToTop','deleteChatList','setChatList'\n    ]),\n    talkTo(data){\n      this.setTalkToWho(data)\n      this.changeIsShowFooterMenu(false)\n      console.log(data)\n      this.$router.push('/talkWin')\n    },\n    toViewTalk(){\n     const count=Math.ceil(Math.random()*3)\n      if (count!==0){\n        this.setViewContentId(count)\n      } else {\n        this.setViewContentId(1)\n      }\n      this.$router.push('/view')\n    },\n    setTop(data){\n      this.setToTop(data)\n    },\n    doDelete(data){\n      this.deleteChatList(data)\n    },\n    add(){\n      const count=Math.ceil(Math.random()*6)\n      this.addChatList({fromUserId:count,content:'晚上好',sendTime:'2021-4-13时间 20:00:01'})\n    }\n  }\n\n}\n</script>\n\n<style scoped>\n#root{\n  display: block;\n  height: 100%;\n  width: 100%;\n  background: url(\"/images/img_2.png\");\n  /*background-size: ;*/\n}\n.media{\n  border-bottom: #A482ED 1px solid;\n}\n.media-img{\n  width: 4rem;\n  border-radius: 50%;\n  border: #1fc39e 1px solid;\n}\n.fromUser-name{\n  padding-top: 0.3rem;\n  color: black;\n}\n.message-content{\n  color: #1D84FF;\n  font-size: 17px;\n}\n.right-btn .btn{\n  height: 5rem;\n  width: 4rem;\n}\n</style>\n"],"sourceRoot":"src/views/talk"}]}